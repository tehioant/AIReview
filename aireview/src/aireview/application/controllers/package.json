[
  {
    "sha": "fde44a5ad9968dec74774b6f284e8ed14502e11c",
    "filename": "aireview/src/aireview/application/controllers/review_controller.py",
    "status": "modified",
    "additions": 2,
    "deletions": 0,
    "changes": 2,
    "blob_url": "https://github.com/tehioant/AIReview/blob/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fapplication%2Fcontrollers%2Freview_controller.py",
    "raw_url": "https://github.com/tehioant/AIReview/raw/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fapplication%2Fcontrollers%2Freview_controller.py",
    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Fapplication%2Fcontrollers%2Freview_controller.py?ref=b34543891879750945b588ef48c47e0b4b8a6811",
    "patch": "@@ -13,5 +13,7 @@ def __init__(\n \n     async def review_pull_request(self, pr_id: int) -> None:\n         pull_request = await self._github.get_pull_request(pr_id)\n+        print(f"Pull request: {pull_request}")\n         review = await self._analyzer.analyze_code(pull_request)\n+        print(f"Review: {review}")\n         await self._github.submit_review(pr_id, review)\n\\ No newline at end of file"
  },
  {
    "sha": "05696477ef1c9b28f5ee2eef4a4d3bae854a2123",
    "filename": "aireview/src/aireview/config.py",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/tehioant/AIReview/blob/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fconfig.py",
    "raw_url": "https://github.com/tehioant/AIReview/raw/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fconfig.py",
    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Fconfig.py?ref=b34543891879750945b588ef48c47e0b4b8a6811",
    "patch": "@@ -3,6 +3,7 @@\n class Config(BaseSettings):\n     dust_api_key: str\n     github_token: str\n+    claude_id: str\n     max_dust_calls: int = 10\n \n     class Config:"
  },
  {
    "sha": "df35f518dc01635ec985e34751308a3c5fdc7ac4",
    "filename": "aireview/src/aireview/domain/assistant.py",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/tehioant/AIReview/blob/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fdomain%2Fassistant.py",
    "raw_url": "https://github.com/tehioant/AIReview/raw/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fdomain%2Fassistant.py",
    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Fdomain%2Fassistant.py?ref=b34543891879750945b588ef48c47e0b4b8a6811",
    "patch": "@@ -1,7 +1,7 @@\n from datetime import datetime\n \n from aireview.interfaces.client import Client\n-from aireview.models.llms.llm_model import LlmModel\n+from aireview.domain.entities.llm_model import LlmModel\n import pytz\n \n "
  },
  {
    "sha": "a9e7629ad137be30f004aa178345bc2cf2d4b5cd",
    "filename": "aireview/src/aireview/domain/entities/llm_model.py",
    "status": "renamed",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/tehioant/AIReview/blob/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fdomain%2Fentities%2Fllm_model.py",
    "raw_url": "https://github.com/tehioant/AIReview/raw/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fdomain%2Fentities%2Fllm_model.py",
    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Fdomain%2Fentities%2Fllm_model.py?ref=b34543891879750945b588ef48c47e0b4b8a6811",
    "previous_filename": "aireview/src/aireview/models/llms/llm_model.py"
  },
  {
    "sha": "1ee27999b95f012c601d39aada81f8f436c487df",
    "filename": "aireview/src/aireview/domain/entities/pull_request.py",
    "status": "modified",
    "additions": 4,
    "deletions": 1,
    "changes": 5,
    "blob_url": "https://github.com/tehioant/AIReview/blob/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fdomain%2Fentities%2Fpull_request.py",
    "raw_url": "https://github.com/tehioant/AIReview/raw/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fdomain%2Fentities%2Fpull_request.py",
    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Fdomain%2Fentities%2Fpull_request.py?ref=b34543891879750945b588ef48c47e0b4b8a6811",
    "patch": "@@ -4,9 +4,12 @@\n @dataclass\n class PullRequest:\n     id: int\n+    number: int\n     title: str\n     description: str\n     files: List[str]\n     diff: str\n     base_branch: str\n-    head_branch: str\n\\ No newline at end of file\n+    head_branch: str\n+    state: str\n+    draft: str"
  },
  {
    "sha": "d370367804f5afdb9f1c790ac7637f5375b64984",
    "filename": "aireview/src/aireview/domain/services/code_analyzer.py",
    "status": "modified",
    "additions": 2,
    "deletions": 1,
    "changes": 3,
    "blob_url": "https://github.com/tehioant/AIReview/blob/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fdomain%2Fservices%2Fcode_analyzer.py",
    "raw_url": "https://github.com/tehioant/AIReview/raw/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fdomain%2Fservices%2Fcode_analyzer.py",
    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Fdomain%2Fservices%2Fcode_analyzer.py?ref=b34543891879750945b588ef48c47e0b4b8a6811",
    "patch": "@@ -1,5 +1,6 @@\n from aireview.domain.entities.pull_request import PullRequest\n from aireview.domain.entities.review import Review\n+from aireview.domain.entities.review_comment import ReviewComment\n \n \n class CodeAnalyzer:\n@@ -22,4 +23,4 @@ def _build_analysis_prompt(self, pull_request):\n         pass\n \n     def _parse_analysis(self, analysis):\n-        return Review\n\\ No newline at end of file\n+        return Review(1, [ReviewComment("aireview/src/aireview/infrastructure/github_client.py", 34, "get_pull_request", "naming")], "summary of review", "COMMENT")\n\\ No newline at end of file"
  },
  {
    "sha": "5a76b1bbf3329623cbe46963b37caad02418cb37",
    "filename": "aireview/src/aireview/infrastructure/github_client.py",
    "status": "modified",
    "additions": 101,
    "deletions": 13,
    "changes": 114,
    "blob_url": "https://github.com/tehioant/AIReview/blob/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Finfrastructure%2Fgithub_client.py",
    "raw_url": "https://github.com/tehioant/AIReview/raw/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Finfrastructure%2Fgithub_client.py",
    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Finfrastructure%2Fgithub_client.py?ref=b34543891879750945b588ef48c47e0b4b8a6811",
    "patch": "@@ -1,17 +1,105 @@\n+import base64\n+from http.client import responses\n \n+import requests\n+from typing import Dict, Any\n+import logging\n \n+from litellm.llms.custom_httpx.http_handler import headers\n+from requests import Response\n+from typer.cli import state\n+\n+from aireview.domain.entities.pull_request import PullRequest\n+from aireview.domain.entities.review import Review\n+\n+logger = logging.getLogger(__name__)\n \n class GitHubClient:\n-    async def submit_review(self, pr_id: int, review: Review) -> None:\n-        # Submit review using GitHub API :cite[cc]\n-        comments = [\n-            {"path": comment.file_path, "line": comment.line, "body": comment.content}\n-            for comment in review.comments\n-        ]\n-\n-        await self._github.pulls.create_review(\n-            pull_number=pr_id,\n-            event=review.status,\n-            body=review.summary,\n-            comments=comments\n-        )\n\\ No newline at end of file\n+\n+    def __init__(self, pat: str, owner: str, repo: str, base_url: str = "https://api.github.com"):\n+        self._pat = pat\n+        self.owner = owner\n+        self.repo = repo\n+        self._base_url = base_url.rstrip(\"/\")\n+        self._session = requests.Session()\n+        self._headers = {\n+            "Authorization": f"Bearer {pat}",\n+            "Accept": "application/vnd.github.v3+json",\n+            \"X-GitHub-Api-Version\": \"2022-11-28\"\n+        }\n+\n+    async def get_pull_request(self, pr_number: int) -> PullRequest:\n+        pr_data = self._session.get(f"{self._base_url}/repos/{self.owner}/{self.repo}/pulls/{pr_number}")\n+        pr_data.raise_for_status()\n+\n+        files_data = self._session.get(f"{self._base_url}/repos/{self.owner}/{self.repo}/pulls/{pr_number}/files")\n+        files_data.raise_for_status()\n+        json_pr_data = pr_data.json()\n+        return PullRequest(\n+            id=json_pr_data["id"],\n+            number=json_pr_data["number"],\n+            title=json_pr_data["title"],\n+            description=json_pr_data["body"] or "",\n+            files=[f["filename"] for f in files_data.json()],\n+            diff="".join(f["patch"] for f in files_data.json() if "patch" in f),\n+            base_branch=json_pr_data["base"]["ref"],\n+            head_branch=json_pr_data["head"]["ref"],\n+            state= json_pr_data["state"],\n+            draft= json_pr_data["draft"],\n+        )\n+\n+    async def submit_review(\n+            self,\n+            pr_number: int,\n+            review: Review\n+    ) -> None:\n+        response: Response\n+        try:\n+            for comment in review.comments:\n+                review_data = {\n+                    "body": f"**{comment.type}**: {comment.content}",\n+                    "commit_id": \"0bc1452063f61711e9bda6b4a1f49410bc621c7b\",\n+                    "path": comment.file_path,\n+                    "start_line": comment.line,\n+                    "start_side": \"RIGHT\",\n+                    "line": comment.line+1,\n+                    "side": \"RIGHT\"\n+                }\n+\n+                response = self._session.post(f"{self._base_url}/repos/{self.owner}/{self.repo}/pulls/{pr_number}/comments",headers=self._headers, json=review_data)\n+                response.raise_for_status()\n+\n+            logger.info(f"Successfully submitted review for PR #{pr_number}")\n+            print(f"Successfully submitted review for PR #{pr_number} :: response {response.json()}")\n+        except Exception as e:\n+            logger.error(f"Failed to submit review for PR #{pr_number}: {str(e)}")\n+            raise\n+\n+    async def get_file_content(\n+            self,\n+            path: str,\n+            ref: str\n+    ) -> str:\n+        try:\n+            response = self._session.get(f"{self._base_url}/repos/{self.owner}/{self.repo}/contents/{path}",\n+                headers=self._headers,\n+                data={"ref": ref}\n+            )\n+            response.raise_for_status()\n+            return base64.b64decode(response.json()["content"]).decode("utf-8")\n+        except Exception as e:\n+            logger.error(f"Failed to fetch file content for {path}: {str(e)}")\n+            raise\n+\n+    async def get_diff_stats(\n+            self,\n+            pr_number: int\n+    ) -> Dict[str, Any]:\n+        files_data = self._session.get(f"{self._base_url}/repos/{self.owner}/{self.repo}/pulls/{pr_number}/files", headers=self._headers,)\n+        files_data.raise_for_status()\n+        return {\n+            "total_changes": sum(f["changes"] for f in files_data),\n+            "additions": sum(f["additions"] for f in files_data),\n+            "deletions": sum(f["deletions"] for f in files_data),\n+            "changed_files": len(files_data.json())\n+        }"
  },
  {
    "sha": "bb8771bfe9a7af2e15a8992c57ab0126db5cdb4e",
    "filename": "aireview/src/aireview/infrastructure/llm_client.py",
    "status": "added",
    "additions": 10,
    "deletions": 0,
    "changes": 10,
    "blob_url": "https://github.com/tehioant/AIReview/blob/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Finfrastructure%2Fllm_client.py",
    "raw_url": "https://github.com/tehioant/AIReview/raw/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Finfrastructure%2Fllm_client.py",
    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Finfrastructure%2Fllm_client.py?ref=b34543891879750945b588ef48c47e0b4b8a6811",
    "patch": "@@ -0,0 +1,10 @@\n+from aireview.domain.entities.llm_model import LlmModel\n+\n+\n+class LLMClient:\n+\n+    url: str\n+    model: LlmModel\n+\n+    def __init__(self):\n+        pass\n\\ No newline at end of file"
  },
  {
    "sha": "2408b02a784838a22c1e2e8699ee12cd768aa2db",
    "filename": "aireview/src/aireview/infrastructure/package.json",
    "status": "added",
    "additions": 462,
    "deletions": 0,
    "changes": 462,
    "blob_url": "https://github.com/tehioant/AIReview/blob/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Finfrastructure%2Fpackage.json",
    "raw_url": "https://github.com/tehioant/AIReview/raw/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Finfrastructure%2Fpackage.json",
    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Finfrastructure%2Fpackage.json?ref=b34543891879750945b588ef48c47e0b4b8a6811",
    "patch": "@@ -0,0 +1,462 @@\n+[\n+{\n+  "url": "https://api.github.com/repos/tehioant/AIReview/pulls/1",\n+  "id": 2196332072,\n+  "node_id": "PR_kwDONPCoZs6C6V4o",\n+  "html_url": "https://github.com/tehioant/AIReview/pull/1",\n+  "diff_url": "https://github.com/tehioant/AIReview/pull/1.diff",\n+  "patch_url": "https://github.com/tehioant/AIReview/pull/1.patch",\n+  "issue_url": "https://api.github.com/repos/tehioant/AIReview/issues/1",\n+  "number": 1,\n+  "state": "open",\n+  "locked": "False",\n+  "title": "feat: create github client",\n+  "user": {\n+    "login": "tehioant",\n+    "id": 47829208,\n+    "node_id": "MDQ6VXNlcjQ3ODI5MjA4",\n+    "avatar_url": "https://avatars.githubusercontent.com/u/47829208?v=4",\n+    "gravatar_id": "",\n+    "url": "https://api.github.com/users/tehioant",\n+    "html_url": "https://github.com/tehioant",\n+    "followers_url": "https://api.github.com/users/tehioant/followers",\n+    "following_url": "https://api.github.com/users/tehioant/following{/other_user}",\n+    "gists_url": "https://api.github.com/users/tehioant/gists{/gist_id}",\n+    "starred_url": "https://api.github.com/users/tehioant/starred{/owner}{/repo}",\n+    "subscriptions_url": "https://api.github.com/users/tehioant/subscriptions",\n+    "organizations_url": "https://api.github.com/users/tehioant/orgs",\n+    "repos_url": "https://api.github.com/users/tehioant/repos",\n+    "events_url": "https://api.github.com/users/tehioant/events{/privacy}",\n+    "received_events_url": "https://api.github.com/users/tehioant/received_events",\n+    "type": "User",\n+    "user_view_type": "public",\n+    "site_admin": "False"\n+  },\n+  "body": "None",\n+  "created_at": "2024-11-23T17:44:39Z",\n+  "updated_at": "2024-11-23T21:21:57Z",\n+  "closed_at": "None",\n+  "merged_at": "None",\n+  "merge_commit_sha": "a54f9e406d42eb07a2dbd0c3d1a6e12bb244a1a6",\n+  "assignee": "None",\n+  "assignees": [],\n+  "requested_reviewers": [],\n+  "requested_teams": [],\n+  "labels": [],\n+  "milestone": "None",\n+  "draft": "False",\n+  "commits_url": "https://api.github.com/repos/tehioant/AIReview/pulls/1/commits",\n+  "review_comments_url": "https://api.github.com/repos/tehioant/AIReview/pulls/1/comments",\n+  "review_comment_url": "https://api.github.com/repos/tehioant/AIReview/pulls/comments{/number}",\n+  "comments_url": "https://api.github.com/repos/tehioant/AIReview/issues/1/comments",\n+  "statuses_url": "https://api.github.com/repos/tehioant/AIReview/statuses/0bc1452063f61711e9bda6b4a1f49410bc621c7b",\n+  "head": {\n+    "label": "tehioant:create-github-client",\n+    "ref": "create-github-client",\n+    "sha": "0bc1452063f61711e9bda6b4a1f49410bc621c7b",\n+    "user": {\n+      "login": "tehioant",\n+      "id": 47829208,\n+      "node_id": "MDQ6VXNlcjQ3ODI5MjA4",\n+      "avatar_url": "https://avatars.githubusercontent.com/u/47829208?v=4",\n+      "gravatar_id": "",\n+      "url": "https://api.github.com/users/tehioant",\n+      "html_url": "https://github.com/tehioant",\n+      "followers_url": "https://api.github.com/users/tehioant/followers",\n+      "following_url": "https://api.github.com/users/tehioant/following{/other_user}",\n+      "gists_url": "https://api.github.com/users/tehioant/gists{/gist_id}",\n+      "starred_url": "https://api.github.com/users/tehioant/starred{/owner}{/repo}",\n+      "subscriptions_url": "https://api.github.com/users/tehioant/subscriptions",\n+      "organizations_url": "https://api.github.com/users/tehioant/orgs",\n+      "repos_url": "https://api.github.com/users/tehioant/repos",\n+      "events_url": "https://api.github.com/users/tehioant/events{/privacy}",\n+      "received_events_url": "https://api.github.com/users/tehioant/received_events",\n+      "type": "User",\n+      "user_view_type": "public",\n+      "site_admin": "False"\n+    },\n+    "repo": {\n+      "id": 888186982,\n+      "node_id": "R_kgDONPCoZg",\n+      "name": "AIReview",\n+      "full_name": "tehioant/AIReview",\n+      "private": "False",\n+      "owner": {\n+        "login": "tehioant",\n+        "id": 47829208,\n+        "node_id": "MDQ6VXNlcjQ3ODI5MjA4",\n+        "avatar_url": "https://avatars.githubusercontent.com/u/47829208?v=4",\n+        "gravatar_id": "",\n+        "url": "https://api.github.com/users/tehioant",\n+        "html_url": "https://github.com/tehioant",\n+        "followers_url": "https://api.github.com/users/tehioant/followers",\n+        "following_url": "https://api.github.com/users/tehioant/following{/other_user}",\n+        "gists_url": "https://api.github.com/users/tehioant/gists{/gist_id}",\n+        "starred_url": "https://api.github.com/users/tehioant/starred{/owner}{/repo}",\n+        "subscriptions_url": "https://api.github.com/users/tehioant/subscriptions",\n+        "organizations_url": "https://api.github.com/users/tehioant/orgs",\n+        "repos_url": "https://api.github.com/users/tehioant/repos",\n+        "events_url": "https://api.github.com/users/tehioant/events{/privacy}",\n+        "received_events_url": "https://api.github.com/users/tehioant/received_events",\n+        "type": "User",\n+        "user_view_type": "public",\n+        "site_admin": "False"\n+      },\n+      "html_url": "https://github.com/tehioant/AIReview",\n+      "description": "Pull request review agent",\n+      "fork": "False",\n+      "url": "https://api.github.com/repos/tehioant/AIReview",\n+      "forks_url": "https://api.github.com/repos/tehioant/AIReview/forks",\n+      "keys_url": "https://api.github.com/repos/tehioant/AIReview/keys{/key_id}",\n+      "collaborators_url": "https://api.github.com/repos/tehioant/AIReview/collaborators{/collaborator}",\n+      "teams_url": "https://api.github.com/repos/tehioant/AIReview/teams",\n+      "hooks_url": "https://api.github.com/repos/tehioant/AIReview/hooks",\n+      "issue_events_url": "https://api.github.com/repos/tehioant/AIReview/issues/events{/number}",\n+      "events_url": "https://api.github.com/repos/tehioant/AIReview/events",\n+      "assignees_url": "https://api.github.com/repos/tehioant/AIReview/assignees{/user}",\n+      "branches_url": "https://api.github.com/repos/tehioant/AIReview/branches{/branch}",\n+      "tags_url": "https://api.github.com/repos/tehioant/AIReview/tags",\n+      "blobs_url": "https://api.github.com/repos/tehioant/AIReview/git/blobs{/sha}",\n+      "git_tags_url": "https://api.github.com/repos/tehioant/AIReview/git/tags{/sha}",\n+      "git_refs_url": "https://api.github.com/repos/tehioant/AIReview/git/refs{/sha}",\n+      "trees_url": "https://api.github.com/repos/tehioant/AIReview/git/trees{/sha}",\n+      "statuses_url": "https://api.github.com/repos/tehioant/AIReview/statuses/{sha}",\n+      "languages_url": "https://api.github.com/repos/tehioant/AIReview/languages",\n+      "stargazers_url": "https://api.github.com/repos/tehioant/AIReview/stargazers",\n+      "contributors_url": "https://api.github.com/repos/tehioant/AIReview/contributors",\n+      "subscribers_url": "https://api.github.com/repos/tehioant/AIReview/subscribers",\n+      "subscription_url": "https://api.github.com/repos/tehioant/AIReview/subscription",\n+      "commits_url": "https://api.github.com/repos/tehioant/AIReview/commits{/sha}",\n+      "git_commits_url": "https://api.github.com/repos/tehioant/AIReview/git/commits{/sha}",\n+      "comments_url": "https://api.github.com/repos/tehioant/AIReview/comments{/number}",\n+      "issue_comment_url": "https://api.github.com/repos/tehioant/AIReview/issues/comments{/number}",\n+      "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/{+path}",\n+      "compare_url": "https://api.github.com/repos/tehioant/AIReview/compare/{base}...{head}",\n+      "merges_url": "https://api.github.com/repos/tehioant/AIReview/merges",\n+      "archive_url": "https://api.github.com/repos/tehioant/AIReview/{archive_format}{/ref}",\n+      "downloads_url": "https://api.github.com/repos/tehioant/AIReview/downloads",\n+      "issues_url": "https://api.github.com/repos/tehioant/AIReview/issues{/number}",\n+      "pulls_url": "https://api.github.com/repos/tehioant/AIReview/pulls{/number}",\n+      "milestones_url": "https://api.github.com/repos/tehioant/AIReview/milestones{/number}",\n+      "notifications_url": "https://api.github.com/repos/tehioant/AIReview/notifications{?since,all,participating}",\n+      "labels_url": "https://api.github.com/repos/tehioant/AIReview/labels{/name}",\n+      "releases_url": "https://api.github.com/repos/tehioant/AIReview/releases{/id}",\n+      "deployments_url": "https://api.github.com/repos/tehioant/AIReview/deployments",\n+      "created_at": "2024-11-14T00:52:27Z",\n+      "updated_at": "2024-11-23T00:14:25Z",\n+      "pushed_at": "2024-11-23T17:44:16Z",\n+      "git_url": "git://github.com/tehioant/AIReview.git",\n+      "ssh_url": "git@github.com:tehioant/AIReview.git",\n+      "clone_url": "https://github.com/tehioant/AIReview.git",\n+      "svn_url": "https://github.com/tehioant/AIReview",\n+      "homepage": "None",\n+      "size": 53,\n+      "stargazers_count": 0,\n+      "watchers_count": 0,\n+      "language": "Python",\n+      "has_issues": "True",\n+      "has_projects": "True",\n+      "has_downloads": "True",\n+      "has_wiki": "True",\n+      "has_pages": "False",\n+      "has_discussions": "False",\n+      "forks_count": 0,\n+      "mirror_url": "None",\n+      "archived": "False",\n+      "disabled": "False",\n+      "open_issues_count": 1,\n+      "license": {\n+        "key": "apache-2.0",\n+        "name": "Apache License 2.0",\n+        "spdx_id": "Apache-2.0",\n+        "url": "https://api.github.com/licenses/apache-2.0",\n+        "node_id": "MDc6TGljZW5zZTI="\n+      },\n+      "allow_forking": "True",\n+      "is_template": "False",\n+      "web_commit_signoff_required": "False",\n+      "topics": [],\n+      "visibility": "public",\n+      "forks": 0,\n+      "open_issues": 1,\n+      "watchers": 0,\n+      "default_branch": "main"\n+    }\n+  },\n+  "base": {\n+    "label": "tehioant:main",\n+    "ref": "main",\n+    "sha": "bfd0812c74528560a80a25bf294805c5a2c69e64",\n+    "user": {\n+      "login": "tehioant",\n+      "id": 47829208,\n+      "node_id": "MDQ6VXNlcjQ3ODI5MjA4",\n+      "avatar_url": "https://avatars.githubusercontent.com/u/47829208?v=4",\n+      "gravatar_id": "",\n+      "url": "https://api.github.com/users/tehioant",\n+      "html_url": "https://github.com/tehioant",\n+      "followers_url": "https://api.github.com/users/tehioant/followers",\n+      "following_url": "https://api.github.com/users/tehioant/following{/other_user}",\n+      "gists_url": "https://api.github.com/users/tehioant/gists{/gist_id}",\n+      "starred_url": "https://api.github.com/users/tehioant/starred{/owner}{/repo}",\n+      "subscriptions_url": "https://api.github.com/users/tehioant/subscriptions",\n+      "organizations_url": "https://api.github.com/users/tehioant/orgs",\n+      "repos_url": "https://api.github.com/users/tehioant/repos",\n+      "events_url": "https://api.github.com/users/tehioant/events{/privacy}",\n+      "received_events_url": "https://api.github.com/users/tehioant/received_events",\n+      "type": "User",\n+      "user_view_type": "public",\n+      "site_admin": "False"\n+    },\n+    "repo": {\n+      "id": 888186982,\n+      "node_id": "R_kgDONPCoZg",\n+      "name": "AIReview",\n+      "full_name": "tehioant/AIReview",\n+      "private": "False",\n+      "owner": {\n+        "login": "tehioant",\n+        "id": 47829208,\n+        "node_id": "MDQ6VXNlcjQ3ODI5MjA4",\n+        "avatar_url": "https://avatars.githubusercontent.com/u/47829208?v=4",\n+        "gravatar_id": "",\n+        "url": "https://api.github.com/users/tehioant",\n+        "html_url": "https://github.com/tehioant",\n+        "followers_url": "https://api.github.com/users/tehioant/followers",\n+        "following_url": "https://api.github.com/users/tehioant/following{/other_user}",\n+        "gists_url": "https://api.github.com/users/tehioant/gists{/gist_id}",\n+        "starred_url": "https://api.github.com/users/tehioant/starred{/owner}{/repo}",\n+        "subscriptions_url": "https://api.github.com/users/tehioant/subscriptions",\n+        "organizations_url": "https://api.github.com/users/tehioant/orgs",\n+        "repos_url": "https://api.github.com/users/tehioant/repos",\n+        "events_url": "https://api.github.com/users/tehioant/events{/privacy}",\n+        "received_events_url": "https://api.github.com/users/tehioant/received_events",\n+        "type": "User",\n+        "user_view_type": "public",\n+        "site_admin": "False"\n+      },\n+      "html_url": "https://github.com/tehioant/AIReview",\n+      "description": "Pull request review agent",\n+      "fork": "False",\n+      "url": "https://api.github.com/repos/tehioant/AIReview",\n+      "forks_url": "https://api.github.com/repos/tehioant/AIReview/forks",\n+      "keys_url": "https://api.github.com/repos/tehioant/AIReview/keys{/key_id}",\n+      "collaborators_url": "https://api.github.com/repos/tehioant/AIReview/collaborators{/collaborator}",\n+      "teams_url": "https://api.github.com/repos/tehioant/AIReview/teams",\n+      "hooks_url": "https://api.github.com/repos/tehioant/AIReview/hooks",\n+      "issue_events_url": "https://api.github.com/repos/tehioant/AIReview/issues/events{/number}",\n+      "events_url": "https://api.github.com/repos/tehioant/AIReview/events",\n+      "assignees_url": "https://api.github.com/repos/tehioant/AIReview/assignees{/user}",\n+      "branches_url": "https://api.github.com/repos/tehioant/AIReview/branches{/branch}",\n+      "tags_url": "https://api.github.com/repos/tehioant/AIReview/tags",\n+      "blobs_url": "https://api.github.com/repos/tehioant/AIReview/git/blobs{/sha}",\n+      "git_tags_url": "https://api.github.com/repos/tehioant/AIReview/git/tags{/sha}",\n+      "git_refs_url": "https://api.github.com/repos/tehioant/AIReview/git/refs{/sha}",\n+      "trees_url": "https://api.github.com/repos/tehioant/AIReview/git/trees{/sha}",\n+      "statuses_url": "https://api.github.com/repos/tehioant/AIReview/statuses/{sha}",\n+      "languages_url": "https://api.github.com/repos/tehioant/AIReview/languages",\n+      "stargazers_url": "https://api.github.com/repos/tehioant/AIReview/stargazers",\n+      "contributors_url": "https://api.github.com/repos/tehioant/AIReview/contributors",\n+      "subscribers_url": "https://api.github.com/repos/tehioant/AIReview/subscribers",\n+      "subscription_url": "https://api.github.com/repos/tehioant/AIReview/subscription",\n+      "commits_url": "https://api.github.com/repos/tehioant/AIReview/commits{/sha}",\n+      "git_commits_url": "https://api.github.com/repos/tehioant/AIReview/git/commits{/sha}",\n+      "comments_url": "https://api.github.com/repos/tehioant/AIReview/comments{/number}",\n+      "issue_comment_url": "https://api.github.com/repos/tehioant/AIReview/issues/comments{/number}",\n+      "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/{+path}",\n+      "compare_url": "https://api.github.com/repos/tehioant/AIReview/compare/{base}...{head}",\n+      "merges_url": "https://api.github.com/repos/tehioant/AIReview/merges",\n+      "archive_url": "https://api.github.com/repos/tehioant/AIReview/{archive_format}{/ref}",\n+      "downloads_url": "https://api.github.com/repos/tehioant/AIReview/downloads",\n+      "issues_url": "https://api.github.com/repos/tehioant/AIReview/issues{/number}",\n+      "pulls_url": "https://api.github.com/repos/tehioant/AIReview/pulls{/number}",\n+      "milestones_url": "https://api.github.com/repos/tehioant/AIReview/milestones{/number}",\n+      "notifications_url": "https://api.github.com/repos/tehioant/AIReview/notifications{?since,all,participating}",\n+      "labels_url": "https://api.github.com/repos/tehioant/AIReview/labels{/name}",\n+      "releases_url": "https://api.github.com/repos/tehioant/AIReview/releases{/id}",\n+      "deployments_url": "https://api.github.com/repos/tehioant/AIReview/deployments",\n+      "created_at": "2024-11-14T00:52:27Z",\n+      "updated_at": "2024-11-23T00:14:25Z",\n+      "pushed_at": "2024-11-23T17:44:16Z",\n+      "git_url": "git://github.com/tehioant/AIReview.git",\n+      "ssh_url": "git@github.com:tehioant/AIReview.git",\n+      "clone_url": "https://github.com/tehioant/AIReview.git",\n+      "svn_url": "https://github.com/tehioant/AIReview",\n+      "homepage": "None",\n+      "size": 53,\n+      "stargazers_count": 0,\n+      "watchers_count": 0,\n+      "language": "Python",\n+      "has_issues": "True",\n+      "has_projects": "True",\n+      "has_downloads": "True",\n+      "has_wiki": "True",\n+      "has_pages": "False",\n+      "has_discussions": "False",\n+      "forks_count": 0,\n+      "mirror_url": "None",\n+      "archived": "False",\n+      "disabled": "False",\n+      "open_issues_count": 1,\n+      "license": {\n+        "key": "apache-2.0",\n+        "name": "Apache License 2.0",\n+        "spdx_id": "Apache-2.0",\n+        "url": "https://api.github.com/licenses/apache-2.0",\n+        "node_id": "MDc6TGljZW5zZTI="\n+      },\n+      "allow_forking": "True",\n+      "is_template": "False",\n+      "web_commit_signoff_required": "False",\n+      "topics": [],\n+      "visibility": "public",\n+      "forks": 0,\n+      "open_issues": 1,\n+      "watchers": 0,\n+      "default_branch": "main"\n+    }\n+  },\n+  "_links": {\n+    "self": {\n+      "href": "https://api.github.com/repos/tehioant/AIReview/pulls/1"\n+    },\n+    "html": {\n+      "href": "https://github.com/tehioant/AIReview/pull/1"\n+    },\n+    "issue": {\n+      "href": "https://api.github.com/repos/tehioant/AIReview/issues/1"\n+    },\n+    "comments": {\n+      "href": "https://api.github.com/repos/tehioant/AIReview/issues/1/comments"\n+    },\n+    "review_comments": {\n+      "href": "https://api.github.com/repos/tehioant/AIReview/pulls/1/comments"\n+    },\n+    "review_comment": {\n+      "href": "https://api.github.com/repos/tehioant/AIReview/pulls/comments{/number}"\n+    },\n+    "commits": {\n+      "href": "https://api.github.com/repos/tehioant/AIReview/pulls/1/commits"\n+    },\n+    "statuses": {\n+      "href": "https://api.github.com/repos/tehioant/AIReview/statuses/0bc1452063f61711e9bda6b4a1f49410bc621c7b"\n+    }\n+  },\n+  "author_association": "OWNER",\n+  "auto_merge": "None",\n+  "active_lock_reason": "None",\n+  "merged": "False",\n+  "mergeable": "True",\n+  "rebaseable": "True",\n+  "mergeable_state": "clean",\n+  "merged_by": "None",\n+  "comments": 0,\n+  "review_comments": 1,\n+  "maintainer_can_modify": "False",\n+  "commits": 1,\n+  "additions": 176,\n+  "deletions": 20,\n+  "changed_files": 7,\n+  "keywords": [],\n+  "husky": {},\n+  "bin":,\n+  "release": {},\n+  "eslintIgnore": [],\n+  "dist": {},\n+  "main": "",\n+  "type": "commonjs",\n+  "repository":,\n+  "optionalDependencies": {},\n+  "typesVersions": {},\n+  "stylelint": {},\n+  "engines": {},\n+  "bundledDependencies":,\n+  "workspaces":,\n+  "maintainers": [],\n+  "jscpd": {},\n+  "author":,\n+  "peerDependencies": {},\n+  "module": "",\n+  "cpu": [],\n+  "packageManager": "",\n+  "preferGlobal": false,\n+  "version": "",\n+  "dependencies": {},\n+  "license":,\n+  "devDependencies": {},\n+  "renovate":,\n+  "jspm":,\n+  "name": "",\n+  "files": [],\n+  "bundleDependencies":,\n+  "esnext":,\n+  "publishConfig": {},\n+  "private":,\n+  "exports":,\n+  "description": "",\n+  "resolutions": {},\n+  "eslintConfig": {},\n+  "ava": {},\n+  "bugs":,\n+  "nodemonConfig": {},\n+  "jscsConfig": {},\n+  "jshintConfig": {},\n+  "directories": {},\n+  "man":,\n+  "scripts": {},\n+  "lint-staged":,\n+  "engineStrict": false,\n+  "types": "",\n+  "funding":,\n+  "os": [],\n+  "browserslist":,\n+  "overrides": {},\n+  "readme": "",\n+  "jest": {},\n+  "prettier":,\n+  "licenses": [],\n+  "typings": "",\n+  "peerDependenciesMeta": {},\n+  "contributors": [],\n+  "config": {},\n+  "homepage": ""\n+},\n+[\n+  {\n+    "sha": "df35f518dc01635ec985e34751308a3c5fdc7ac4",\n+    "filename": "aireview/src/aireview/domain/assistant.py",\n+    "status": "modified",\n+    "additions": "1",\n+    "deletions": "1",\n+    "changes": "2",\n+    "blob_url": "https://github.com/tehioant/AIReview/blob/0bc1452063f61711e9bda6b4a1f49410bc621c7b/aireview%2Fsrc%2Faireview%2Fdomain%2Fassistant.py",\n+    "raw_url": "https://github.com/tehioant/AIReview/raw/0bc1452063f61711e9bda6b4a1f49410bc621c7b/aireview%2Fsrc%2Faireview%2Fdomain%2Fassistant.py",\n+    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Fdomain%2Fassistant.py?ref=0bc1452063f61711e9bda6b4a1f49410bc621c7b",\n+    "patch": "@@ -1,7 +1,7 @@\\n from datetime import datetime\\n \\n from aireview.interfaces.client import Client\\n-from aireview.models.llms.llm_model import LlmModel\\n+from aireview.domain.entities.llm_model import LlmModel\\n import pytz\\n \\n "\n+  },\n+  {\n+    "sha": "a9e7629ad137be30f004aa178345bc2cf2d4b5cd",\n+    "filename": "aireview/src/aireview/domain/entities/llm_model.py",\n+    "status": "renamed",\n+    "additions": "0",\n+    "deletions": "0",\n+    "changes": "0",\n+    "blob_url": "https://github.com/tehioant/AIReview/blob/0bc1452063f61711e9bda6b4a1f49410bc621c7b/aireview%2Fsrc%2Faireview%2Fdomain%2Fentities%2Fllm_model.py",\n+    "raw_url": "https://github.com/tehioant/AIReview/raw/0bc1452063f61711e9bda6b4a1f49410bc621c7b/aireview%2Fsrc%2Faireview%2Fdomain%2Fentities%2Fllm_model.py",\n+    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Fdomain%2Fentities%2Fllm_model.py?ref=0bc1452063f61711e9bda6b4a1f49410bc621c7b",\n+    "previous_filename": "aireview/src/aireview/models/llms/llm_model.py"\n+  },\n+  {\n+    "sha": "a20b940fb09d1a4bb726cf8f0017071ff2648ad0",\n+    "filename": "aireview/src/aireview/infrastructure/github_client.py",\n+    "status": "modified",\n+    "additions": "161",\n+    "deletions": "13",\n+    "changes": "174",\n+    "blob_url": "https://github.com/tehioant/AIReview/blob/0bc1452063f61711e9bda6b4a1f49410bc621c7b/aireview%2Fsrc%2Faireview%2Finfrastructure%2Fgithub_client.py",\n+    "raw_url": "https://github.com/tehioant/AIReview/raw/0bc1452063f61711e9bda6b4a1f49410bc621c7b/aireview%2Fsrc%2Faireview%2Finfrastructure%2Fgithub_client.py",\n+    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Finfrastructure%2Fgithub_client.py?ref=0bc1452063f61711e9bda6b4a1f49410bc621c7b",\n+    "patch": "@@ -1,17 +1,165 @@\\n+from importlib.metadata import files\\n \\n+import requests\\n \\n+# infrastructure/github_client.py\\n+from typing import List, Dict, Any, Optional\\n+import logging\\n+\\n+from setuptools.unicode_utils import filesys_decode\\n+\\n+from aireview.domain.entities.pull_request import PullRequest\\n+from aireview.domain.entities.review import Review\\n+from aireview.domain.entities.review_comment import ReviewComment\\n+\\n+logger = logging.getLogger(__name__)\\n \\n class GitHubClient:\\n-    async def submit_review(self, pr_id: int, review: Review) -> None:\\n-        # Submit review using GitHub API :cite[cc]\\n-        comments = [\\n-            {\"path\": comment.file_path, \"line\": comment.line, \"body\": comment.content}\\n-            for comment in review.comments\\n-        ]\\n-\\n-        await self._github.pulls.create_review(\\n-            pull_number=pr_id,\\n-            event=review.status,\\n-            body=review.summary,\\n-            comments=comments\\n-        )\\n\\\\ No newline at end of file\\n+\\n+    def __init__(self, pat: str, base_url: str = \"https://api.github.com\"):\\n+        \"\"\"Initialize GitHub client with authentication token.\\n+\\n+        Args:\\n+            token (str): GitHub personal access token\\n+            base_url (str, optional): GitHub API base URL. Defaults to \"https://api.github.com\".\\n+        \"\"\"\\n+        self._pat = pat\\n+        self._base_url = base_url.rstrip(\"/ʼ)\\n+        self._headers = {\\n+            \"Authorization\": f\"Bearer {pat}\",\\n+            \"Accept\": \"application/vnd.github.v3+json\",\\n+            \"X-GitHub-Api-Version\": \"2022-11-28\"\\n+        }\\n+\\n+    async def get_pull_r\n+  }\n+]\n+]\n\\ No newline at end of file"
  },
  {
    "sha": "b1a2ac1a7277b9bc4e34acf4bded3bb6d74186b2",
    "filename": "aireview/src/aireview/main.py",
    "status": "modified",
    "additions": 5,
    "deletions": 17,
    "changes": 22,
    "blob_url": "https://github.com/tehioant/AIReview/blob/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fmain.py",
    "raw_url": "https://github.com/tehioant/AIReview/raw/b34543891879750945b588ef48c47e0b4b8a6811/aireview%2Fsrc%2Faireview%2Fmain.py",
    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Fmain.py?ref=b34543891879750945b588ef48c47e0b4b8a6811",
    "patch": "@@ -1,35 +1,23 @@\n-import os\n+import asyncio\n \n from aireview.application.controllers.review_controller import ReviewController\n from aireview.config import Config\n-from aireview.domain.assistant import Assistant\n from aireview.domain.services.code_analyzer import CodeAnalyzer\n from aireview.infrastructure.dust_client import DustClient\n from aireview.infrastructure.github_client import GitHubClient\n-from aireview.interfaces.github import GithubClient\n-from aireview.models.llms.llm_model import LlmModel\n \n \n-# def main():\n-#     print("Hello World")\n-#\n-#     claude = LlmModel(os.getenv("claude_id"), os.getenv("dust_api_key"), "https://dust.tt/api/v1/w/SB0HhCoUEW/assistant/conversations")\n-#     dust_assistant = Assistant("claude_agent", claude)\n-#\n-#     azdevops = GithubClient()\n-#     print(azdevops.get_repositories())\n-#     # response = dust_assistant.create_conversation("Hello, tell me about yourself")\n-#     # print(dust_assistant.get_message(response))\n \n-async def main():\n+def main():\n     config = Config()\n+    # TODO: create dust agent for reviews\n     dust_client = DustClient(config.dust_api_key)\n-    github_client = GitHubClient(config.github_token)\n+    github_client = GitHubClient(config.github_token, "tehioant", "AIReview")\n \n     analyzer = CodeAnalyzer(dust_client)\n     controller = ReviewController(analyzer, github_client)\n \n-    await controller.review_pull_request(pr_id=123)\n+    asyncio.run(controller.review_pull_request(pr_id=1))\n \n if __name__ == "__main__":\n     main()\n\\ No newline at end of file"
  },
  {
    "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
    "filename": "aireview/src/aireview/models/__init__.py",
    "status": "removed",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/tehioant/AIReview/blob/bfd0812c74528560a80a25bf294805c5a2c69e64/aireview%2Fsrc%2Faireview%2Fmodels%2F__init__.py",
    "raw_url": "https://github.com/tehioant/AIReview/raw/bfd0812c74528560a80a25bf294805c5a2c69e64/aireview%2Fsrc%2Faireview%2Fmodels%2F__init__.py",
    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Fmodels%2F__init__.py?ref=bfd0812c74528560a80a25bf294805c5a2c69e64"
  },
  {
    "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
    "filename": "aireview/src/aireview/models/llms/__init__.py",
    "status": "removed",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/tehioant/AIReview/blob/bfd0812c74528560a80a25bf294805c5a2c69e64/aireview%2Fsrc%2Faireview%2Fmodels%2Fllms%2F__init__.py",
    "raw_url": "https://github.com/tehioant/AIReview/raw/bfd0812c74528560a80a25bf294805c5a2c69e64/aireview%2Fsrc%2Faireview%2Fmodels%2Fllms%2F__init__.py",
    "contents_url": "https://api.github.com/repos/tehioant/AIReview/contents/aireview%2Fsrc%2Faireview%2Fmodels%2Fllms%2F__init__.py?ref=bfd0812c74528560a80a25bf294805c5a2c69e64"
  }
]
